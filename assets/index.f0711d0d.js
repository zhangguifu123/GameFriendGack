var x=Object.defineProperty,C=Object.defineProperties;var B=Object.getOwnPropertyDescriptors;var b=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var h=(o,e,a)=>e in o?x(o,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[e]=a,v=(o,e)=>{for(var a in e||(e={}))D.call(e,a)&&h(o,a,e[a]);if(b)for(var a of b(e))S.call(e,a)&&h(o,a,e[a]);return o},V=(o,e)=>C(o,B(e));import{h as _,s as P,e as U}from"./user.7a03029a.js";import{_ as I,R as N,r as f,o as T,p as A,K as l,V as n,q as m,J as E,M as g,L as s}from"./index.19c7010c.js";const L=()=>_.get("manager/list"),R=o=>_.post("manager/add",{data:o}),z=o=>_.request("delete",`manager/${o}`),H={data(){return{headerStyle:{"background-color":"rgba(0,0,0,0.05)"},data:[],options:[{label:"\u8D85\u7EA7\u7BA1\u7406\u5458",value:0},{label:"\u666E\u901A\u7BA1\u7406\u5458",value:1}],dialogVisible:!1,addPerson:{name:"",department:"",level:"",phone:"",password:""},rules:{name:{required:!0,message:"\u8BF7\u586B\u5199\u59D3\u540D",trigger:"change"},phone:{required:!0,message:"\u8BF7\u586B\u5199\u7535\u8BDD",trigger:"change"},level:{required:!0,message:"\u8BF7\u9009\u62E9\u7BA1\u7406\u5458\u6743\u9650",trigger:"change"},password:{required:!0,message:"\u8BF7\u586B\u5199\u5BC6\u7801",trigger:"change"},department:{required:!0,message:"\u8BF7\u586B\u5199\u5907\u6CE8",trigger:"change"}}}},mounted(){this.getData()},beforeRouteEnter(o,e,a){N().buttonAuth.includes("superAdmin")?a():a({path:"/inner/403"})},methods:{addManager(){this.$refs.ref.validate().then(o=>{if(o){const e=V(v({},this.addPerson),{level:this.addPerson.level[0]});R(e).then(()=>{P("\u6DFB\u52A0\u6210\u529F\uFF01"),this.getData(),this.dialogVisible=!1})}})},getData(){L().then(({data:o})=>{this.data=o.list})},removeManager(o){if(console.log(o.id==f.getItem("info").id,o.id,f.getItem("info").id),o.id==f.getItem("info").id){U("\u4E0D\u80FD\u5220\u9664\u672C\u4EBA\uFF01");return}z(o.id).then(()=>{P("\u5220\u9664\u6210\u529F\uFF01"),this.getData()})}}},J={class:"bg-fff p-10"},K=g("\u6DFB\u52A0\u7BA1\u7406\u5458"),j={class:"flex"},F=g("\u5220\u9664"),G=g("\u63D0\u4EA4"),O=g("\u53D6\u6D88");function Q(o,e,a,W,t,c){const u=s("el-button"),d=s("el-table-column"),y=s("el-popconfirm"),q=s("el-table"),p=s("el-input"),i=s("el-form-item"),w=s("el-cascader"),M=s("el-form"),k=s("el-dialog");return T(),A("div",J,[l(u,{type:"primary",class:"mb-10",onClick:e[0]||(e[0]=r=>t.dialogVisible=!0)},{default:n(()=>[K]),_:1}),m("div",null,[l(q,{data:t.data,"header-cell-style":t.headerStyle,border:""},{default:n(()=>[l(d,{prop:"id",label:"\u7F16\u53F7",width:"80"}),l(d,{prop:"name",label:"\u59D3\u540D"}),l(d,{prop:"phone",label:"\u7535\u8BDD\u53F7\u7801","min-width":"120"}),l(d,{prop:"level",label:"\u6743\u9650"},{default:n(r=>[m("div",null,E(r.row.level==0?"\u8D85\u7EA7\u7BA1\u7406\u5458":"\u666E\u901A\u7BA1\u7406\u5458"),1)]),_:1}),l(d,{prop:"department",label:"\u5907\u6CE8"}),l(d,{label:"\u64CD\u4F5C"},{default:n(r=>[m("div",j,[l(y,{title:"\u786E\u8BA4\u5220\u9664\u8BE5\u7BA1\u7406\u5458?",confirmButtonText:"\u786E\u8BA4",cancelButtonText:"\u53D6\u6D88",onConfirm:X=>c.removeManager(r.row)},{reference:n(()=>[l(u,{type:"danger",size:"small"},{default:n(()=>[F]),_:1})]),_:2},1032,["onConfirm"])])]),_:1})]),_:1},8,["data","header-cell-style"])]),l(k,{"model-value":t.dialogVisible,title:"\u6DFB\u52A0\u7BA1\u7406\u5458","close-on-click-modal":!1,onClose:e[7]||(e[7]=r=>t.dialogVisible=!1)},{default:n(()=>[m("div",null,[l(M,{ref:"ref",model:t.addPerson,"label-width":"auto",rules:t.rules},{default:n(()=>[l(i,{prop:"name",label:"\u59D3\u540D",required:""},{default:n(()=>[l(p,{modelValue:t.addPerson.name,"onUpdate:modelValue":e[1]||(e[1]=r=>t.addPerson.name=r)},null,8,["modelValue"])]),_:1}),l(i,{prop:"phone",label:"\u7535\u8BDD",required:""},{default:n(()=>[l(p,{modelValue:t.addPerson.phone,"onUpdate:modelValue":e[2]||(e[2]=r=>t.addPerson.phone=r)},null,8,["modelValue"])]),_:1}),l(i,{prop:"level",label:"\u6743\u9650",required:""},{default:n(()=>[l(w,{modelValue:t.addPerson.level,"onUpdate:modelValue":e[3]||(e[3]=r=>t.addPerson.level=r),options:t.options,placeholder:"\u8BF7\u9009\u62E9\u7BA1\u7406\u5458\u6743\u9650"},null,8,["modelValue","options"])]),_:1}),l(i,{prop:"password",label:"\u5BC6\u7801",required:""},{default:n(()=>[l(p,{modelValue:t.addPerson.password,"onUpdate:modelValue":e[4]||(e[4]=r=>t.addPerson.password=r),type:"password"},null,8,["modelValue"])]),_:1}),l(i,{prop:"department",label:"\u5907\u6CE8",required:""},{default:n(()=>[l(p,{modelValue:t.addPerson.department,"onUpdate:modelValue":e[5]||(e[5]=r=>t.addPerson.department=r),type:"textarea"},null,8,["modelValue"])]),_:1}),l(i,null,{default:n(()=>[l(u,{type:"primary",onClick:c.addManager},{default:n(()=>[G]),_:1},8,["onClick"]),l(u,{type:"danger",onClick:e[6]||(e[6]=r=>t.dialogVisible=!1)},{default:n(()=>[O]),_:1})]),_:1})]),_:1},8,["model","rules"])])]),_:1},8,["model-value"])])}var ee=I(H,[["render",Q]]);export{ee as default};
