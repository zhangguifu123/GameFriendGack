var z=Object.defineProperty,B=Object.defineProperties;var I=Object.getOwnPropertyDescriptors;var g=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var f=(e,t,s)=>t in e?z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,h=(e,t)=>{for(var s in t||(t={}))N.call(t,s)&&f(e,s,t[s]);if(g)for(var s of g(t))O.call(t,s)&&f(e,s,t[s]);return e},b=(e,t)=>B(e,I(t));import{i as U}from"./gameManage.04a1778e.js";import{h as _,s as v}from"./user.7a03029a.js";import{_ as F,r as y,o as M,p as P,K as l,V as a,M as u,J as R,q as p,L as i}from"./index.19c7010c.js";const T=e=>_.request("post","study/upload",{data:e}),E=e=>_.request("get",`study/list/${e}`),J=e=>_.request("delete",`study/${e}`);const K={data(){return{headerStyle:{"background-color":"rgba(0,0,0,0.05)"},data:[],page:1,total:0,limit:10,addData:{url:"",name:"",manager_name:"",subject:"",manager_id:""},subjectOptions:[{label:"\u6570\u5B66\u5EFA\u6A21\u7ADE\u8D5B",value:"\u6570\u5B66\u5EFA\u6A21\u7ADE\u8D5B"},{label:"\u7269\u7406\u7ADE\u8D5B",value:"\u7269\u7406\u7ADE\u8D5B"},{label:"\u7535\u5B50\u7ADE\u8D5B",value:"\u7535\u5B50\u7ADE\u8D5B"},{label:"\u521B\u65B0\u521B\u4E1A\u5927\u8D5B",value:"\u521B\u65B0\u521B\u4E1A\u5927\u8D5B"},{label:"\u5E02\u573A\u8C03\u7814\u5927\u8D5B",value:"\u5E02\u573A\u8C03\u7814\u5927\u8D5B"},{label:"\u7A0B\u5E8F\u8BBE\u8BA1\u5927\u8D5B",value:"\u7A0B\u5E8F\u8BBE\u8BA1\u5927\u8D5B"},{label:"\u6CD5\u5EAD\u6A21\u62DF\u5927\u8D5B",value:"\u6CD5\u5EAD\u6A21\u62DF\u5927\u8D5B"}],rules:{url:{required:!0,message:"\u8BF7\u4E0A\u4F20\u6587\u4EF6"},name:{required:!0,message:"\u8BF7\u586B\u5199\u8D44\u6E90\u540D\u79F0"},subject:{required:!0,message:"\u8BF7\u9009\u62E9\u8D44\u6E90\u7C7B\u578B"}},dialogVisible:!1}},mounted(){this.getData()},computed:{fileList(){return this.addData.image?[{url:this.addData.image}]:[]},pictureList(){return this.data.map(e=>e.image)}},methods:{downLoad(e){window.open(e)},del(e){J(e).then(()=>{v("\u5220\u9664\u6210\u529F\uFF01"),this.getData()})},getData(){E(this.page).then(({data:e})=>{this.data=e.bannerList,this.total=e.total,this.limit=e.limit})},httpRequest(e){U(e.file).then(({data:t})=>{this.addData.url=t})},timeFormat(e){return e.replace(/T/g," ").replace(/\.[\d]{6}Z/g,"")},change(e){this.addData.subject=e[0]},dialogShow(){this.dialogVisible=!0},addBanner(){this.$refs.ref.validate(e=>{if(e){const t=b(h({},this.addData),{manager_id:y.getItem("info").id.toString(),manager_name:y.getItem("info").username});T(t).then(()=>{v("\u4E0A\u4F20\u6210\u529F\uFF01"),this.getData(),this.dialogVisible=!1})}})}}},Z={class:"bg-fff p-10"},A=u("\u70B9\u51FB\u4E0A\u4F20"),G={class:"flex"},H=u(" \u5220\u9664 "),Q=u("\u4E0B\u8F7D"),W={class:"mt-10 flex",style:{"justify-content":"right"}},X={class:"upload-icon mr-10"},Y=u("\u63D0\u4EA4"),$=u("\u53D6\u6D88");function ee(e,t,s,te,o,r){const c=i("el-button"),d=i("el-table-column"),C=i("el-popconfirm"),D=i("el-table"),k=i("el-pagination"),x=i("iconifyIconOnline"),w=i("el-upload"),m=i("el-form-item"),q=i("el-input"),V=i("el-cascader"),S=i("el-form"),j=i("el-dialog");return M(),P("div",Z,[l(c,{type:"primary",onClick:r.dialogShow,class:"m-10"},{default:a(()=>[A]),_:1},8,["onClick"]),l(D,{data:o.data,border:"","header-cell-style":o.headerStyle},{default:a(()=>[l(d,{prop:"id",label:"\u7F16\u53F7",width:"80"}),l(d,{label:"\u8D44\u6E90\u540D\u79F0",prop:"name","min-width":"120"}),l(d,{label:"\u8D44\u6E90\u7C7B\u578B",prop:"subject"}),l(d,{prop:"manager_name",label:"\u53D1\u5E03\u7BA1\u7406\u5458"}),l(d,{label:"\u53D1\u5E03\u65F6\u95F4","min-width":"160"},{default:a(n=>[u(R(r.timeFormat(n.row.created_at)),1)]),_:1}),l(d,{label:"\u64CD\u4F5C",width:"200"},{default:a(n=>[p("div",G,[l(C,{title:"\u786E\u8BA4\u5220\u9664?","confirm-button-text":"\u786E\u8BA4","cancel-button-text":"\u53D6\u6D88",onConfirm:L=>r.del(n.row.id)},{reference:a(()=>[l(c,{type:"danger",size:"mini"},{default:a(()=>[H]),_:1})]),_:2},1032,["onConfirm"]),l(c,{onClick:L=>r.downLoad(n.row.url),type:"primary",size:"mini"},{default:a(()=>[Q]),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["data","header-cell-style"]),p("div",W,[l(k,{background:"",layout:"total,prev, pager, next","page-size":o.limit,"onUpdate:page-size":t[0]||(t[0]=n=>o.limit=n),"current-page":o.page,"onUpdate:current-page":t[1]||(t[1]=n=>o.page=n),onCurrentChange:r.getData,onPrevClick:r.getData,onNextClick:r.getData,total:o.total},null,8,["page-size","current-page","onCurrentChange","onPrevClick","onNextClick","total"])]),l(j,{"model-value":o.dialogVisible,title:"\u6DFB\u52A0banner","close-on-click-modal":!1,onClose:t[4]||(t[4]=n=>o.dialogVisible=!1)},{default:a(()=>[l(S,{ref:"ref",model:o.addData,"label-width":"auto",rules:o.rules},{default:a(()=>[l(m,{label:"\u6587\u4EF6",required:"",prop:"url"},{default:a(()=>[l(w,{class:"upload-demo flex",limit:1,action:"","http-request":r.httpRequest,"file-list":r.fileList},{default:a(()=>[p("div",X,[l(x,{icon:"plus"})])]),_:1},8,["http-request","file-list"])]),_:1}),l(m,{prop:"name",label:"\u8D44\u6E90\u540D\u79F0",required:""},{default:a(()=>[l(q,{modelValue:o.addData.name,"onUpdate:modelValue":t[2]||(t[2]=n=>o.addData.name=n)},null,8,["modelValue"])]),_:1}),l(m,{prop:"subject",label:"\u8D44\u6E90\u7C7B\u578B",required:""},{default:a(()=>[l(V,{onChange:r.change,options:o.subjectOptions,placeholder:"\u8BF7\u9009\u62E9\u8D44\u6E90\u7C7B\u578B"},null,8,["onChange","options"])]),_:1}),l(m,null,{default:a(()=>[l(c,{type:"primary",onClick:r.addBanner},{default:a(()=>[Y]),_:1},8,["onClick"]),l(c,{type:"danger",onClick:t[3]||(t[3]=n=>o.dialogVisible=!1)},{default:a(()=>[$]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["model-value"])])}var ie=F(K,[["render",ee],["__scopeId","data-v-5b9d38d4"]]);export{ie as default};
